# Film Search App

Это консольное приложение для поиска информации о фильмах в базе данных. Пользователь может выполнять поиск по различным критериям, таким как ключевые слова, жанр, год выпуска, актеры, а также просматривать популярные поисковые запросы и изменять язык интерфейса.

## Файлы

В проекте используются следующие файлы:

- **config.py**: Файл с конфигурационными настройками приложения, включая параметры для подключения к базе данных.
- **language_pack.json**: Файл с текстами локализации интерфейса приложения. Создается автоматически при первом запуске.
- **user_state.json**: Файл для хранения состояния пользователя, включая данные о зарегистрированных пользователях и их сеансах. Также создается автоматически при первом запуске.
- **database_scripts/**: Директория с SQL-скриптами для настройки базы и самой базой данных.

Эти файлы являются частью структуры проекта и используются для обеспечения правильной работы приложения.

## Установка

1. Убедитесь, что у вас установлен Python 3.
2. Клонируйте репозиторий с приложением:

    ```shell
    git clone <repository-url>
    cd film-search-app
    ```

3. Установите зависимости:

    ```shell
    pip install -r requirements.txt
    ```

## Настройка

Перед запуском приложения настройте файл `config.py`, где вы можете задать параметры для подключения к базе данных.

## Настройка базы данных

Для работы приложения требуется база данных MySQL. В папке `database_scripts` содержатся скрипты для создания и начальной настройки базы данных.

### Шаги для настройки базы данных

## Настройка базы данных

Для работы приложения требуется база данных MySQL. В папке `database_scripts` содержатся скрипты для создания и начальной настройки базы данных.

### Шаги для настройки базы данных

1. **Импорт базы данных**

   Импортируйте базу данных из файла `database_scripts/Dump20240624.sql`.

2. **Установка таблицы пользователей**

   Запустите файл `database_scripts/Users_Table.sql`.

3. **Установка таблицы запросов пользователей**

   Запустите файл `database_scripts/User_Queries_Table.sql`.

4. **Установка языковых пакетов**

   Запустите файл `database_scripts/Language_Packs_Table.sql`.

5. **Установка нового языкового пакета** (опционально)

   Запустите файл `database_scripts/New_Language.sql`.

## Запуск

Для запуска приложения выполните следующую команду в корневой директории проекта:

```shell
python main.py
```

После запуска вы увидите главное меню приложения, где можно выбирать опции для выполнения различных действий.

## Опции главного меню

1. **Изменить язык**
   - Позволяет выбрать новый язык интерфейса приложения.

2. **Отобразить популярные запросы**
   - Просмотр списка наиболее популярных поисковых запросов пользователей.

3. **Регистрация / Просмотр профиля**
   - Если пользователь не залогинен, предлагает зарегистрироваться в системе.
   - Если пользователь залогинен, отображает информацию о текущем пользователе.

4. **Вход / Выход**
   - Если пользователь не залогинен, позволяет войти в систему существующему пользователю.
   - Если пользователь залогинен, позволяет выйти из системы.

5. **Закрыть приложение**
   - Отключение от базы данных и выход из приложения.

6. **Поиск по ключевому слову**
   - Поиск фильмов по введенным ключевым словам.

7. **Поиск по жанру**
   - Поиск фильмов по заданному жанру.

8. **Поиск по году**
   - Поиск фильмов по заданному году выпуска.

9. **Поиск по актеру**
   - Поиск фильмов по имени актера.

10. **Поиск по нескольким критериям**
    - Поиск фильмов по комбинации ключевых слов, жанру, году выпуска и/или актеру.

## Использование

### Основные функции

- После запуска приложения выберите нужную опцию из главного меню, введя соответствующую цифру.

### Дополнительные функции

- Приложение поддерживает локализацию интерфейса через файлы с текстами на разных языках.
- Логи запросов сохраняются для последующего анализа популярных запросов пользователей.


## Структура проекта

- Проект `film_search_app` организован в виде каталогов и файлов, которые обеспечивают различные аспекты работы приложения. Ниже приведено описание каждого файла и каталога:

```
film_search_app/                    # Корневая директория проекта
│
├── main.py                         # Основной исполняемый файл приложения
│
├── config.py                       # Конфигурационные настройки приложения (параметры подключения к базе данных)
│
├── film_search_app.py              # Основной файл приложения, содержит логику поиска фильмов и взаимодействия с пользователем
│
├── language_pack.json              # Файл с текстами локализации для различных языков интерфейса. Создается автоматически при первом запуске.
│
├── user_state.json                 # Файл для хранения состояния пользователей (текущая сессия). Создается автоматически при первом запуске.
│
├── README.md                       # Документация проекта, описание и инструкции по установке и использованию
│
├── database/                       # Директория для модулей работы с базой данных
│   ├── __init__.py                 # Инициализация модуля базы данных
│   └── manager.py                  # Модуль для работы с базой данных (подключение, выполнение запросов и т.д.)
│
├── log_manager/                    # Директория для модулей логирования
│   ├── __init__.py                 # Инициализация модуля логирования
│   └── logger.py                   # Модуль для логирования запросов пользователей
│
├── authentication/                 # Директория для модулей аутентификации
│   ├── __init__.py                 # Инициализация модуля аутентификации
│   └── manager.py                  # Модуль для управления пользователями (регистрация, вход в систему и т.д.)
│
├─── utils/                         # Директория для вспомогательных модулей
│   ├── __init__.py                 # Инициализация модуля утилит
│   └── localization.py             # Модуль для локализации интерфейса (загрузка и обработка текстов на разных языках)
│
└─── database_scripts/              # Директория для SQL-скриптов
    ├── Dump20240624.sql            # Скрипт для создания дампа базы данных
    ├── Users_Table.sql             # Скрипт для создания таблицы пользователей
    ├── User_Queries_Table.sql      # Скрипт для создания таблицы поисковых запросов пользователей
    ├── Language_Packs_Table.sql    # Скрипт для создания таблицы языковых пакетов
    └── New_Language.sql            # Скрипт для добавления нового языка в таблицу языковых пакетов
```

## Подробное описание модулей

### Корневая директория проекта

`main.py`

Основной исполняемый файл приложения. Служит точкой входа для запуска программы.

`config.py`

Файл с конфигурационными настройками приложения, такими как параметры подключения к базе данных.

`film_search_app.py`

Основной файл приложения, содержащий логику поиска фильмов и взаимодействия с пользователем. Включает в себя:

- Инициализацию менеджеров для базы данных, аутентификации и локализации.
- Логику для отображения меню и обработки пользовательских вводов.
- Методы для поиска фильмов по различным критериям (ключевое слово, жанр, год, актер и множественные критерии).
- Методы для регистрации, входа и выхода пользователей, а также изменения языка интерфейса.

- `language_pack.json`
- 
Файл с текстами локализации для различных языков интерфейса. Хранит переводы текстов и сообщений приложения.

`user_state.json`

Файл для хранения состояния пользователей, таких как текущие сессии (например, залогиненные пользователи).

`README.md`

Документация проекта, включающая описание проекта, инструкции по установке и использованию.

## Директория `database`

`__init__.py`

Инициализационный файл модуля базы данных, необходимый для обозначения этой директории как модуля Python.

`manager.py`

Модуль для работы с базой данных. Включает в себя:

- Класс `DatabaseManager` для подключения к базе данных, выполнения SQL-запросов и закрытия соединений.
- Методы для выполнения выборок, вставок, обновлений и удаления данных.
- Методы для поиска фильмов по различным критериям и получения случайных фильмов из базы данных.

## Директория `log_manager`

`__init__.py`

Инициализационный файл модуля логирования, необходимый для обозначения этой директории как модуля Python.

`logger.py`

Модуль для логирования запросов пользователей. Включает в себя:

- Класс `QueryLogger` для подключения к базе данных и логирования поисковых запросов пользователей.
- Методы для логирования запросов по ключевым словам, жанрам, годам, актерам и множественным критериям.
- Метод для получения популярных поисковых запросов пользователей.

## Директория `authentication`

`__init__.py`

Инициализационный файл модуля аутентификации, необходимый для обозначения этой директории как модуля Python.

`manager.py`

Модуль для управления пользователями. Включает в себя:

- Класс `AuthManager` для регистрации, входа и выхода пользователей.
- Методы для хеширования паролей, сохранения и загрузки состояния пользователей.
- Методы для проверки существования пользователя и очистки состояния.

## Директория `utils`

`__init__.py`

Инициализационный файл модуля утилит, необходимый для обозначения этой директории как модуля Python.

`localization.py`

Модуль для локализации интерфейса. Включает в себя:

- Функцию `load_localization_texts_from_file` для загрузки текстов локализации из файла.
- Класс `LocalizationManager` для управления текстами локализации и переключения языков интерфейса.

## Директория `database_scripts`

`Dump20240624.sql`

Скрипт для создания дампа базы данных. Содержит команды для создания всех необходимых таблиц и начальных данных.

`Users_Table.sql`

Скрипт для создания таблицы пользователей. Определяет структуру таблицы `users` для хранения информации о пользователях.

`User_Queries_Table.sql`
Скрипт для создания таблицы поисковых запросов пользователей. Определяет структуру таблицы `user_queries` для хранения информации о поисковых запросах.

`Language_Packs_Table.sql`
Скрипт для создания таблицы языковых пакетов. Определяет структуру таблиц `language_pack` и `localized_text` для хранения языковых текстов и кодов языков.

`New_Language.sql`
Скрипт для добавления нового языка в таблицу языковых пакетов. Содержит команды для вставки новых строк с текстами локализации для нового языка.

Этот проект представляет собой приложение для поиска фильмов, которое включает функциональность регистрации и аутентификации пользователей, логирования поисковых запросов и поддержки многоязычного интерфейса.

## Реализовано

1. **Изменение языка интерфейса**
   - Реализованы языковые пакеты и возможность смены языка через меню.

2. **Просмотр популярных запросов**
   - Возможность просмотреть список наиболее популярных поисковых запросов пользователей.

3. **Регистрация и просмотр профиля**
   - Регистрация новых пользователей.
   - Просмотр профиля для залогиненных пользователей.

4. **Вход и выход**
   - Возможность входа в систему для зарегистрированных пользователей.
   - Возможность выхода из системы.

5. **Поиск фильмов**
   - Поиск по ключевому слову.
   - Поиск по жанру.
   - Поиск по году.
   - Поиск по актеру.
   - Поиск по нескольким критериям.

6. **Закрытие приложения**
   - Корректное отключение от базы данных и закрытие приложения.

## В процессе разработки

1. **Листание страниц результата поиска**
   - Возможность перелистывания страниц с результатами поиска для удобной навигации.

2. **Поиск по рейтингу**
   - Функция поиска фильмов по их рейтингу.

3. **Поиск по длительности фильма**
   - Функция поиска фильмов по длительности.

4. **Более красивый вывод результата поиска**
   - Улучшение отображения результатов поиска для повышения читаемости и удобства.

5. **Модуль для валидации запросов пользователя**
   - Валидация пользовательских запросов для повышения надежности и корректности работы приложения.

6. **Упрощенный поиск по критериям**
   - Упрощение процедуры поиска фильмов по различным критериям.

7. **Пункт "Как использовать" в меню**
   - Добавление раздела в меню с инструкциями по использованию приложения.

8. **Выбор фильма для детального просмотра описания**
   - Возможность выбора фильма из результатов поиска для детального просмотра его описания.

9. **Корректные рекомендации на основе вкусов пользователя**
   - Реализация системы рекомендаций фильмов на основе предпочтений пользователя.

10. **Просмотр популярных запросов самого пользователя**
    - Возможность пользователю просматривать свои популярные запросы.

11. **История запросов пользователя**
    - Сохранение и просмотр истории запросов пользователя.

12. **Суперпользователь для редактирования и добавления характеристик фильма**
    - Введение роли суперпользователя с правами редактирования и добавления информации о фильмах.

13. **Управление настройками поиска**
    - Возможность настройки параметров поиска для более точных результатов.

14. **Возможность редактировать учетные данные пользователя**
    - Функция редактирования профиля пользователя, включая изменение пароля и других учетных данных.

15. **Проверка надежности пароля**
    - Внедрение механизма проверки надежности пароля при регистрации и изменении пароля.

16. **Более корректный поиск по ключевым словам**
    - Улучшение алгоритмов поиска по ключевым словам для получения более релевантных результатов.


## Документация API

Подробное описание методов классов и функций приложения можно найти в соответствующих файлах с исходным кодом.

## Лицензия

Этот проект является отчетным проектом, разработанным Sergei Oskolkov. Вы можете свободно использовать код для учебных и личных целей. Запрещено использование кода в коммерческих целях без предварительного согласования с автором.

